<div id="gallery" class="gallery-page">
  <div class="gallery-overlay">
    <div class="gallery">
      <figure>
        <img src="images/gallery/g1.jpg" alt="" />
      </figure>
      <figure>
        <img src="images/gallery/g2.jpg" alt="" />
      </figure>
      <figure>
        <img src="images/gallery/g3.jpg" alt="" />
      </figure>
      <figure>
        <img src="images/gallery/g4.jpg" alt="" />
      </figure>
      <figure>
        <img src="images/gallery/g5.jpg" alt="" />
      </figure>
      <figure>
        <img src="images/gallery/g6.jpg" alt="" />
      </figure>
    </div>
  </div>
</div>

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none;">
  <symbol id="close" viewBox="0 0 18 18">
    <path d="M0 0.452519C6.05495 0.452519 10.013 0.452519 15.18 0.452519C17.2163 -0.565649 17.9105 0.452519 19.6691 0.452519V2.02605H15.18H0V0.452519Z" transform="translate(15.9271 14.0666) scale(-1.00234 0.997651) rotate(-45)" fill="white"/>
    <path d="M0 0.452519C6.05495 0.452519 10.013 0.452519 15.18 0.452519C17.2163 -0.565649 17.9105 0.452519 19.6691 0.452519V2.02605H15.18H0V0.452519Z" transform="translate(14.0806 15.8781) scale(1.00234 0.997651) rotate(-135)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(4.98398 2.05685) scale(-1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(4.55753 2.15479) scale(-1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(4.03271 1.24063) scale(-1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(3.60629 1.33858) scale(-1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(3.01584 0.489723) scale(-1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(2.58945 0.587669) scale(-1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(2.07758 4.94962) scale(1.00234 0.997651) rotate(-135)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(2.17596 4.5252) scale(1.00234 0.997651) rotate(-135)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(1.25751 4.00283) scale(1.00234 0.997651) rotate(-135)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(1.35593 3.5784) scale(1.00234 0.997651) rotate(-135)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(0.535889 2.95808) scale(1.00234 0.997651) rotate(-135)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(0.634308 2.53366) scale(1.00234 0.997651) rotate(-135)" fill="white"/>
    <path d="M0 0.452519C6.05495 0.452519 10.013 0.452519 15.18 0.452519C17.2163 -0.565649 17.9105 0.452519 19.6691 0.452519V2.02605H15.18H0V0.452519Z" transform="translate(0 14.023) scale(1.00234 0.997651) rotate(-45)" fill="white"/>
    <path d="M0 0.452519C6.05495 0.452519 10.013 0.452519 15.18 0.452519C17.2163 -0.565649 17.9105 0.452519 19.6691 0.452519V2.02605H15.18H0V0.452519Z" transform="translate(1.98633 16) scale(1.00234 -0.997651) rotate(45)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(10.9157 2.09908) scale(1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(11.3422 2.19703) scale(1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(11.867 1.28287) scale(1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(12.2934 1.38082) scale(1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(12.8838 0.53196) scale(1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(13.3102 0.629913) scale(1.00234 0.997651) rotate(-45)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(13.9663 5.13538) scale(1.00234 -0.997651) rotate(45)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(13.8679 4.71095) scale(1.00234 -0.997651) rotate(45)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(14.7863 4.18857) scale(1.00234 -0.997651) rotate(45)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(14.6879 3.76414) scale(1.00234 -0.997651) rotate(45)" fill="white"/>
    <rect width="0.694205" height="0.647925" rx="0.323962" transform="translate(15.508 3.14383) scale(1.00234 -0.997651) rotate(45)" fill="white"/>
    <rect width="0.231402" height="0.555364" transform="translate(15.4095 2.7194) scale(1.00234 -0.997651) rotate(45)" fill="white"/>
  </symbol>
</svg>

<script>
  popup = {
    init: function(){
      $('figure').click(function(){
        popup.open($(this))
      })
      
      $(document).on('click', '.popup img', function(){
        return false
      }).on('click', '.popup', function(){
        popup.close()
      })
    },
    open: function($figure) {
      $('.gallery').addClass('pop')
      $popup = $('<div class="popup" />').appendTo($('body'))
      $fig = $figure.clone().appendTo($('.popup'))
      $bg = $('<div class="bg" />').appendTo($('.popup'))
      $close = $('<div class="close"><svg><use xlink:href="#close"></use></svg></div>').appendTo($fig)
      $shadow = $('<div class="shadow" />').appendTo($fig)
      src = $('img', $fig).attr('src')
      $shadow.css({backgroundImage: 'url(' + src + ')'})
      $bg.css({backgroundImage: 'url(' + src + ')'})
      setTimeout(function(){
        $('.popup').addClass('pop')
      }, 10)
    },
    close: function(){
      $('.gallery, .popup').removeClass('pop')
      setTimeout(function(){
        $('.popup').remove()
      }, 100)
    }
  }

  popup.init()
</script>

